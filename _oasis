OASISFormat: 0.4
Name:        ocap
Version:     0.4
Synopsis:    Packet capture tools
Authors:     Richard Mortier, Richard Clegg, Anil Madhavapeddy, Dave Scott
License:     ISC
Plugins:     META (0.4), DevFiles (0.4)
BuildTools:  ocamlbuild


Library "ocap"
  # Root library, supporting container formats and providing a standard iterator
  CompiledObject: best
  Path: lib/
  Pack: true
  Install: true
  Modules: Pcap, Version
  BuildDepends: cstruct ( >= 0.5.0 ), cstruct.syntax, ocap.ps

Library "ps"
  # Subsidiary library, providing raw and cooked packet formats
  CompiledObject: best
  Path: lib/ps/
  Pack: true
  FindlibParent: ocap
  FindlibName: ps
  Modules:
    Buf, Packet, Demux,
    Ethernet, Arp, Icmp, Ip4, Udp4, Tcp4, Dhcp4
  BuildDepends: cstruct ( >= 0.5.0 ), cstruct.syntax, ipaddr


# Document "ocap"
#   Title: PCAP-format docs
#   Type: ocamlbuild (0.3)
#   BuildTools+: ocamldoc
#   XOCamlbuildPath: lib/
#   XOCamlbuildModules:
#     Packet, Demux,
#     Ethernet, Arp, Icmp, Ip4, Udp4, Tcp4, Dhcp4,
#     Pcap, Flow, Unidir, Bidir


Executable "ocap"
  CompiledObject: best
  Path: unix
  Install: true
  MainIs: ocap_cmd.ml
  BuildDepends: ocap, cmdliner

# Library mirage
#   Build$: flag(mirage)
#   CompiledObject: best
#   Path: mirage
#   Findlibname: mirage
#   Findlibparent: ocap
#   Modules: Pcap_mirage, Lwt_bounded_stream
#   BuildDepends: mirage-net, pcap-format, lwt, lwt.syntax

# Library flowlib
#   Build$: flag(unix)
#   CompiledObject: best
#   Path: unix
#   Modules: Flowlib
#   BuildDepends: lwt, lwt.unix, lwt.syntax, pcap-format, cstruct.lwt, ipaddr


# Library "fs"
#   Pack: true
#   Path: lib/fs/
#   FindlibParent: capture
#   FindlibName: flows
#   Modules: Flow, Unidir, Bidir
#   BuildDepends: cstruct ( >= 0.5.0 ), cstruct.syntax, capture


# Executable print
#   Build$: flag(unix)
#   CompiledObject: best
#   Path: unix
#   MainIs: print.ml
#   Custom: true
#   Install: false
#   BuildDepends: lwt, lwt.unix, lwt.syntax, capture

# Library flow
#   CompiledObject: best
#   Path: lib
#   Pack: true
#   FindlibName: pcap-flow
#   FindlibParent: pcap-format
#   Modules: Flow
#   BuildDepends: pcap-format


# Library mirage
#   Build$: flag(mirage)
#   CompiledObject: best
#   Path: mirage
#   Findlibname: mirage
#   Findlibparent: capture
#   Modules: Pcap_mirage, Lwt_bounded_stream
#   BuildDepends: mirage-net, pcap-format, lwt, lwt.syntax

# Library flowlib
#   Build$: flag(unix)
#   CompiledObject: best
#   Path: unix
#   Modules: Flowlib
#   BuildDepends: lwt, lwt.unix, lwt.syntax, pcap-format, cstruct.lwt

# Executable flows
#   Build$: flag(unix)
#   CompiledObject: best
#   Path: unix
#   MainIs: flows.ml
#   Custom: true
#   Install: false
#   BuildDepends: lwt, lwt.unix, lwt.syntax, pcap-format, cstruct.lwt

# Executable packed_flow
#   Build$: flag(unix)
#   CompiledObject: best
#   Path: unix
#   MainIs: packed_flow.ml
#   Custom: true
#   Install: false
#   BuildDepends: lwt, lwt.unix, lwt.syntax, pcap-format, cstruct.lwt, flowlib

# Executable copy
#   Build$: flag(unix)
#   CompiledObject: best
#   Path: unix
#   MainIs: copy.ml
#   Custom: true
#   Install: false
#   BuildDepends: pcap-format

# Executable test
#   Path: lib_test
#   MainIs: test.ml
#   Build$: flag(tests)
#   Custom: true
#   CompiledObject: best
#   Install: false
#   BuildDepends: lwt, lwt.unix, cstruct, pcap-format, oUnit

# Executable capture
#   Build$: flag(mirage)
#   CompiledObject: best
#   Path: mirage
#   MainIs: capture.ml
#   Custom: true
#   Install: false
#   BuildDepends: lwt, lwt.syntax, cstruct, pcap-format, mirage-net, mirage
